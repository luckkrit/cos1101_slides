const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/slidev/shiki-B-yRWw6R.js","assets/monaco/bundled-types-Dm18dwve.js","assets/modules/file-saver-BirHVELW.js","assets/modules/vue-DfCQnSJn.js","assets/monaco/bundled-types-CVHThWJp.css","assets/modules/shiki-CD7nly4B.js","assets/modules/shiki-Bxv373Z5.css"])))=>i.map(i=>d[i]);
import{ab as I,t as b,d as B,G as L,o as i,b as a,U as P,z as D,Y as H,N as z,ac as J,M as F,E as K,J as U,a2 as q,e as A,x as C,K as x,F as k,Z as M,c as G,i as W,g as R,ad as Y,h as Z,l as Q,k as X}from"../modules/vue-DfCQnSJn.js";import{j as ee,_ as N,e as te,f as E}from"../monaco/bundled-types-Dm18dwve.js";import{k as ne,m as re}from"../index-DM9yoLNx.js";import{u as se}from"./context-DZjsGUWE.js";import{_ as oe}from"./IconButton.vue_vue_type_script_setup_true_lang-BnmUZAX2.js";import"../modules/file-saver-BirHVELW.js";import"../modules/shiki-CD7nly4B.js";function ie(s){return Array.from({length:s})}function ae(){console.log("Hello from snippets/external.ts")}const le=Object.freeze(Object.defineProperty({__proto__:null,emptyArray:ie,sayHello:ae},Symbol.toStringTag,{value:"Module"})),T={vue:I,"./external":le},ce=[],ue=ee(async()=>{const s={javascript:j,js:j,typescript:j,ts:j},{getHighlighter:t}=await N(async()=>{const{getHighlighter:o}=await import("./shiki-B-yRWw6R.js");return{getHighlighter:o}},__vite__mapDeps([0,1,2,3,4,5,6])),r=await t(),m=async(o,f,l)=>{try{const d=s[f];if(!d)throw new Error(`Runner for language "${f}" not found`);return await d(o,{options:l,highlight:r,run:async(e,n)=>await m(e,n,l)})}catch(d){return console.error(d),{error:`${d}`}}};for(const o of ce){const f=await o(s);Object.assign(s,f)}return{highlight:r,run:m}});function de(s){const t=b([]),r=e=>t.value.push({error:String(e)}),m=(...e)=>t.value.push(e.map(f)),o=Object.assign({},console);o.info=o.log=o.debug=o.warn=o.error=m,o.clear=()=>t.value.length=0;try{const e=`return async (console, __slidev_import, __slidev_on_error) => {
      try {
        ${d(s)}
      } catch (e) {
        __slidev_on_error(e)
      }
    }`;new Function(e)()(o,n=>{const u=T[n];if(!u)throw new Error(`Module not found: ${n}.
Available modules: ${Object.keys(T).join(", ")}. Please refer to https://sli.dev/custom/config-code-runners#additional-runner-dependencies`);return u},r)}catch(e){r(e)}function f(e){return typeof e=="string"?{text:e}:{text:l(e),highlightLang:"javascript"}}function l(e){var u;let n="";if(e instanceof Error)n=`Error: ${JSON.stringify(e.message)}`;else if(e==null||typeof e=="symbol")n=String(e);else if(Array.isArray(e))n=`[${e.map(l).join(", ")}]`;else if(e instanceof Set){const c=[...e];n=`Set (${e.size}) {${c.map(l).join(", ")}}`}else if(e instanceof Map){const c=[...e.entries()];n=`Map (${e.size}) {${c.map(([p,h])=>`${l(p)} => ${l(h)}`).join(", ")}}`}else if(e instanceof RegExp)n=e.toString();else if(typeof e=="string")n=JSON.stringify(e);else if(typeof e=="object"){const c=((u=e.constructor)==null?void 0:u.name)??"",p=c&&c==="Object"?"":c;n=(p?`${p}: `:"")+JSON.stringify(e,(v,g)=>g===void 0?"__undefined__":g,2).replace(/"__undefined__"/g,"undefined"),n=String(n)}else n=String(e);return n}function d(e){return e=e.replace('import "reflect-metadata"',"").replace('require("reflect-metadata")',""),e=e.replace("export {};",""),e}return t}let O;async function j(s){O??(O=await N(()=>import("../monaco/bundled-types-Dm18dwve.js").then(r=>r.t),__vite__mapDeps([1,2,3,4]))),s=O.transpileModule(s,{compilerOptions:{module:O.ModuleKind.ESNext,target:O.ScriptTarget.ES2022},transformers:{after:[fe]}}).outputText;const t=/import\s*\((.+)\)/g;return s=s.replace(t,(r,m)=>`__slidev_import(${m})`),de(s)}function fe(s){const{factory:t}=s,{isImportDeclaration:r,isNamedImports:m,NodeFlags:o}=O;return f=>{var d,e;const l=[...f.statements];for(let n=0;n<l.length;n++){const u=l[n];if(!r(u))continue;let c;const p=(d=u.importClause)==null?void 0:d.namedBindings,h=[];if((e=u.importClause)!=null&&e.name&&h.push(t.createBindingElement(void 0,t.createIdentifier("default"),u.importClause.name)),p)if(m(p)){for(const g of p.elements)h.push(t.createBindingElement(void 0,g.propertyName,g.name));c=t.createObjectBindingPattern(h)}else c=t.createIdentifier(p.name.text);else c=t.createObjectBindingPattern(h);const v=t.createVariableStatement(void 0,t.createVariableDeclarationList([t.createVariableDeclaration(c,void 0,void 0,t.createAwaitExpression(t.createCallExpression(t.createIdentifier("import"),void 0,[u.moduleSpecifier])))],o.Const));l[n]=v}return t.updateSourceFile(f,l)}}const pe=B({__name:"DomElement",props:{element:{}},setup(s){const t=s,r=b();return L(()=>{r.value&&r.value.appendChild(t.element)}),(m,o)=>(i(),a("div",{ref_key:"container",ref:r},null,512))}}),me={key:0,class:"text-sm text-center opacity-50"},he={key:1,class:"text-sm text-center opacity-50"},_e={key:2,class:"text-sm text-center opacity-50"},ge=["innerHTML"],ye={key:1,class:"text-red-500"},ve={key:3,class:"output-line"},xe=["innerHTML"],be={key:2,class:"separator"},Se={key:0,class:"absolute right-1 top-1 max-h-full flex gap-1"},Ae=B({__name:"CodeRunner",props:{modelValue:{},lang:{},autorun:{type:[Boolean,String]},height:{},showOutputAt:{type:[null,Boolean,String,Number,Array]},highlightOutput:{type:Boolean},runnerOptions:{}},emits:["update:modelValue"],setup(s,{emit:t}){const r=s,m=t,{isPrintMode:o}=ne(),f=P(r,"modelValue",m),{$renderContext:l,$clicksContext:d}=se(),e=D(()=>!["slide","presenter"].includes(l.value)),n=o.value?"once":r.autorun,u=b(n),c=H(),p=b(0),h=b(),v=b(r.showOutputAt);if(r.showOutputAt){const S=re();z(()=>{const y=d.calculate(r.showOutputAt);y?(d.register(S,y),J(()=>{v.value=!y.isActive.value})):v.value=!1}),F(()=>d.unregister(S))}const g=te(200,async()=>{if(e.value)return;const{highlight:S,run:y}=await ue();h.value=S;const _=setTimeout(()=>{u.value=!0},500);c.value=await y(f.value,r.lang,r.runnerOptions??{}),p.value+=1,u.value=!1,clearTimeout(_)});return n==="once"?g():n&&K(f,g,{immediate:!0}),(S,y)=>(i(),a(k,null,[U(A("div",{class:"relative flex flex-col rounded-b border-t border-main",style:Z({height:r.height}),"data-waitfor":".slidev-runner-output"},[e.value?(i(),a("div",me,' Code is disabled in the "'+C(x(l))+'" mode ',1)):u.value?(i(),a("div",he," Running... ")):c.value?(i(),a("div",{key:`run-${p.value}`,class:"slidev-runner-output"},[(i(!0),a(k,null,M(x(E)(Y(c.value)),(_,V)=>(i(),a(k,{key:V},["html"in _?(i(),a("div",{key:0,innerHTML:_.html},null,8,ge)):"error"in _?(i(),a("div",ye,C(_.error),1)):"element"in _?(i(),G(pe,{key:2,element:_.element},null,8,["element"])):(i(),a("div",ve,[(i(!0),a(k,null,M(x(E)(_),(w,$)=>(i(),a(k,{key:$},[w.highlightLang&&h.value?(i(),a("span",{key:0,class:"highlighted",innerHTML:h.value(w.text,w.highlightLang)},null,8,xe)):(i(),a("span",{key:1,class:W(w.class)},C(w.text),3)),$<x(E)(_).length-1?(i(),a("span",be,",")):R("v-if",!0)],64))),128))]))],64))),128))])):(i(),a("div",_e," Click the play button to run the code "))],4),[[q,!v.value]]),x(f).trim()?(i(),a("div",Se,[Q(oe,{class:"w-8 h-8 max-h-full flex justify-center items-center",title:"Run code",onClick:x(g)},{default:X(()=>y[0]||(y[0]=[A("div",{class:"i-carbon:play"},null,-1)])),_:1},8,["onClick"])])):R("v-if",!0)],64))}});export{Ae as default};
